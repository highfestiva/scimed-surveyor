<html>
<head>
  <title>{{area}}</title>
  <link rel="stylesheet" href="/static/sci-survey.css" type="text/css">
  <script src="https://cdn.bokeh.org/bokeh/release/bokeh-{{bokeh_version}}.min.js" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" crossorigin="anonymous"></script>
</head>
<body>
  <div class="inline main-chart">
    <div class="flex-outer">
      <div class="main-title">
      </div>
      <div class="main-holder flex-inner">
        <div id="main-plot">
        </div>
      </div>
    </div>
  </div>
  <div class="inline sub-annotations-top">
    <div class="flex-outer">
      <div class="sub-annotation-top-banner">
      </div>
      <div class="sub-annotations flex-inner">
      </div>
    </div>
  </div>
  <div class="articles-top">
    <table class="articles">
    </table>
  </div>
  <script>
    var url = '{{area}}/plot-main' + window.location.search;
    $.getJSON(url).done(function(data) {
      main = data["main"];
      $(".main-title").text(main['name']);
      Bokeh.embed.embed_item(main['plot'], "main-plot");
      data['annotations'].map(function(v, i) {
        var cId = "annotation-plot-" + i;
        var annotation = v["name"];
        var annotationUrl = annotation + window.location.search;
        $(".sub-annotations").append('<div class="annotation"><p><a href="{{area}}/annotation/'+annotationUrl+'">'+annotation+'</a></p><div class="annotation-chart"><div id="'+cId+'"></div></div></div>');
        Bokeh.embed.embed_item(v["plot"], cId);
      });
      $(".articles").append('<tr><td class="line-no header">#</td><td class="header">Articles</td></tr>');
      data['articles'].map(function(v, i) {
        $(".articles").append('<tr><td class="line-no">'+(i+1)+'.</td><td><a href="'+v["url"]+'">'+v["title"]+'</a> ('+v["date"]+')</td></tr>');
      });
    });
  </script>
</body>
<html>
